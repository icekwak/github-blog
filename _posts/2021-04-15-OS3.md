---
title:  "[4~5주차] 운영체제"
excerpt: "프로세스와 스레드"

categories:
  - 
tags:
  - 
last_modified_at: 2021-04-15 #T08:06:00-05:00
---

---
# 프로세스 개요
- 프로그램: 저장장치에 저장되어 있는 정적인 상태
- 프로세스: 실행을 위해 메모리에 올라온 동적인 상태

### 프로세스 제어 블록(PCB)
- 운영체제가 해당 프로세스를 위해 관리하는 자료 구조
  - 프로세스 구분자
  - 메모리 관련 정보
  - 각종 중간값

### <mark>프로세스의 4가지 상태</mark>

|상태|설명|작업|
|:---|:---|:---|
|생성 상태|프로세스가 메모리에 올라와 실행 준비를 완료한 상태|메모리 할당, PCB 생성|
|준비 상태|실행 대기 중인 모든 프로세스가 자기 순서를 기다리는 상태|dispatch(PID): 준비->실행|
|실행 상태|프로세스가 CPU를 할당받아 실행되는 상태|timeout(PID): 실행->준비, exit(PID): 실행->완료, block(PID): 실행->대기|
|완료 상태|프로세스가 종료되는 상태|메모리 삭제, PCB 삭제|

### <mark>프로세스의 또 다른 상태</mark>

|상태|설명|작업|
|:---|:---|:---|
|대기상태|실행 상태에 있는 프로세스가 입출력을 요청하면 입출력이 완료될 때까지 기다리는 상태|Wakeup(PID): 대기->준비|
|보류상태|프로세스가 메모리에서 잠시 쫓겨난 상태||

### 디스패치
준비 상태의 프로세스 중 하나를 골라 실행 상태로 바꾸는 CPU 스케줄러의 작업
### 타임아웃(인터럽트)
프로세스가 자신에게 주어진 하나의 타임 슬라이스 동안 작업을 끝내지 못하면 다시 준비 상태로 돌아가는 것

---
# <mark>프로세스 제어 블록과 문맥 교환</mark>
### 프로세스 제어 블록(PCB)
- 운영체제가 해당 프로세스를 위해 관리하는 자료 구조
- 프로세스 하나 당 PCB 하나 생성
- 프로세스의 인식표라고 생각하면 됨

### 프로세스 제어 블록의 구성
- 포인터 : 준비 상태나 대기 상태의 큐를 구현할 때 사용
- 프로세스 상태 : 프로세스의 상태값 정보 저장
- 프로세스 구분자 : 프로세스 번호(ID) 같은것
- 프로그램 카운터 : 다음에 실행될 명령어의 위치를 가리키는 PC값
- 프로세스 우선순위 : 프로세스의 실행 순서를 결정
- 각정 레지스터 정보 : 프로세스가 실행되는 중에 사용하던 레지스터 값
- 메모리 관리 정보 : 프로세스가 메모리의 어디에 있는지 나타내는 메모리 위치 정보
- 할당된 자원 정보 : 프로세스를 실행하기 위해 사용하는 입출력 자원이나 오픈 파일 등에 대한 정보
- 계정 정보 : 계정 번호, CPU 할당 시간, CPU 사용 시간 등
- 부모 프로세스 구분자와 자식 프로세스 구분자 : 부모 PPID, 자식 CPID 정보

### 문맥 교환(context switch)
- CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 작업

---
# 프로세스의 연산
### 프로세스의 구조

|PCB|->|인식표|
|:---:|:---:|:---:|
|코드 영역|->|읽기 전용|
|데이터 영역|->|읽기/쓰기|
|스택 영역|->|숨김 영역|

### <mark>fork()</mark>
- 실행 중인 프로세스로부터 새로운 프로세스를 복사(복제)하는 함수
- PCB 변경 내용
 - 프로세스 구분자, 메모리 관련 정보, 부모 프로세스 구분자와 자식 프로세스 구분자
- 장점 : 프로세스 생성 속도가 빠름, 자원 상속 가능, 시스템 관리 효율적

### <mark>exec()</mark>
- 기존의 프로세스를 새로운 프로세스로 전환(재사용)하는 함수
- 프로세스는 그대로 둔 채 내용만 바꾸는 시스템 호출 (대체)

### wait()
- 자식 프로세스가 끌날 때까지 기다림

### 프로세스 계층 구조
- 프로세스는 init 프로세스의 자식이 되어 트리 구조를 이룸
- 장점
  1. 여러 작업을 동시에 처리할 수 있음
  2. 프로세스의 재사용이 용이하다.

### 미아 프로세스
- 프로세스가 종료된 후에도 비정상적으로 남아 있는 프로세스
- c언어의 exit()나 return()로 미아 프로세스 발생을 미연에 방지함

---
# 스레드
- 프로세스보다 작은 개념
- CPU 스케줄러가 CPU에 전달하는 일 하나
- CPU가 처리하는 작업의 단위는 프로세스로부터 전달받은 스레드
  - 운영체제 입장에서의 작업 단위는 프로세스
  - CPU 입장에서의 작업 단위는 스레드

### <mark>멀티태스킹과 멀티스레드의 차이</mark>
- 멀티태스킹
  - fork() 시스템 호출이라고 생각하면 됨 - 정적 영역도 그대로 복사되어 여러 개 생성
- 멀티스레드
  - 정젹 영역 하나로 동적 영역들이 공유함 - 자원 낭비를 막고 효율성 향상
  - 단점 : 정적 영역을 공유하기 때문에 한 스레드가 문제가 생기면 전체에 영향을 미침