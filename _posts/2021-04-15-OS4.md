---
title:  "[6~7주차] 운영체제"
excerpt: "CPU 스케줄링"

categories:
  - 운영체제
# tags:
#   - 
last_modified_at: 2021-04-15 #T08:06:00-05:00
---

---
# 스케줄링 개요
### CPU 스케줄러
- 여려 프로세스의 상황을 고려하여 CPU와 시스템 자원의 배정을 결정

### 스케줄링의 단계
- 고수준 스케줄링
 - 시스템의 내의 전체 작업 수를 조절하는 것
- 저수준 스케줄링
 - <mark>어떤 프로세스에 CPU를 할당할지</mark>, 어떤 프로세스를 대기 상태로 보낼지 등 결정
- 중간 수준 스케줄링

### 스케줄링의 목적
- <mark>공평성</mark>, 효율성, 안정성, 확장성, 반응 시간 보장, 무한 연기 방지

---
# <mark>스케줄링 시 고려사항</mark>

|구분|선점형 스케줄링|비선점형 스케줄링|
|:---|:---|:---|
|작업 방식|실행 상태에 있는 작업을 중단시키고 새로운 작업을 실행할 수 있다|실행 상태에 있는 작업이 완료할 때까지 다른 작업이 불가능하다|
|장점|빠른 응답 시간을 요국하는 경우에 적합(대화형이나 시분할 시스템)|문맥 교환의 오버헤드가 적다|
|단점|문맥 교환 오버헤드가 많다|기다리는 프로세스가 많아 처리율이 떨어진다|
|사용|시분할 방식 스케줄러에 사용|일괄 작업 스케줄러에 사용|
|중요도|높다|낮다|

### 프로세스 우선순위
1. 커널 프로세스 > 일반 프로세스
  - 우선순위가 높은게 CPU를 먼저 차지, 오래 쓸 수 있다
2. CPU 집중 프로세스 < 입출력 집중 프로세스
 - 시스템의 효율이 향상
3. 대화형 프로세스 > 일괄 처리 프로세스
4. 전면 프로세스 > 후면 프로세스

---
# 다중 큐
### 준비 상태의 다중 큐
- 프로세스는 준비 상태에 들어올 때마다 자신의 우선 순위에 해당하는 큐의 마지막에 삽임

### 프로세스의 우선순위를 배정하는 방식
- 고정 우선순위 방식
  - 우선순위를 부여하면 프로세스가 끌날 때까지 바뀌지 않는 방식
  - 우선순위가 변하지 않기 때문에 구현이 쉽다
  - 작업 효율이 떨어짐
- 변동 우선순위 방식
 - 프로세스 생성 시 부여받은 우선순위가 프로세스 작업 중간에 변하는 방식
 - 구현하기 여럽지만, 시스템 효율성을 높일 수 있다

### 대기 상태의 다중 큐
- 시스템의 효율을 높이기 위해 대기 상태에서는 같은 <mark>입출력</mark>을 요구한 프로세스끼리 모아 놓음

---
# <mark>스케줄링 알고리즘</mark>
### 종류
- 비선점형 알고리즘
 - FCFS 스케줄링, SJF 스케줄링, HRN 스케줄링
- 선점형 알고리즘
 - 라운드 로빈 스케줄링, SRT 스케줄링, 다단계 큐 스케줄링, 다단계 피드백 큐 스케줄링
- 둘 다 가능
 - 우선순위 스케줄링

### 스케줄링 알고리즘의 평가 기준
- CPU 사용률
- 처리량

- 대기 시간
- 응답 시간
- 실행 시간
- 반환 시간 (대기 시간 + 실행 시간)

### 평균 대기 시간
- 모든 프로세스의 대기 시간을 합한 뒤 프로세스의 수로 나눈 값

## 비선점형
### FCFS 스케줄링
- 처리 시간이 긴 프로세스가 CPU를 차지하면 다른 프로세스들은 하염없이 기다려 효율성이 떨어짐

### SJF 스케줄링
- 프로세스의 종료 시간을 정확하게 예측하기 어려움
- 공평성이 떨어짐 (아사(starvation) 현상)
##### 에이징(낭이 먹기)
- 아사 현상 완화 방법

### HRN 스케줄링
- SJF 스케줄링의 아사 현상을 해결하기 위해 만들어진 비선점형 알고리즘
- 프로세스 우선순위를 결정하는 기준
 - <mark>우선순위 = (대기시간 / CPU 사용 시간) + 1</mark>

## 선점형
### 라운드 로빈 스케줄링
- 할당받은 시간(타임 슬라이스) 동안 작업을 하다가 작업을 완료하지 못하면 준비 큐의 맨 뒤로 가서 자기 차례를 기다리는 방식
- 타임 슬라이스를 잘 조절 해줘야 한다.
  - 타임 슬라이스가 크면 FCFS 스케줄링과 비슷하다
  - 타임 슬라이스가 작으면 문맥 교환의 오버헤드가 많다

### SRT 스케줄링
- 기본적으로 라운드 로빈 스케줄링을 사용하지만, CPU를 할당받을 프로세스를 선택할 때 남아 있는 작업 시간이 가장 적은 프로세스를 선택
- 남은 시간을 주기적으로 계산해서 남은 시간이 더 적은 프로세스를 문맥 교환한다
- <mark>프로세스의 종료 시간을 정확하게 예측하기 어렵고 아사 현상이 생길 수 있다</mark>

### 우선순위 스케줄링
- 프로세스의 중요도에 따른 우선순위를 반영한 스케줄링 알고리즘

### 다단계 큐 스케줄링
- 변동 우선순위 알고리즘
- 우선순위가 낮은 것도 실행될 수 있도록 한다 (공평성)

### 다단계 피드백 큐 스케줄링
- 우선순위에 따라 타임 슬라이스 크기가 다름